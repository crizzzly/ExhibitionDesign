#:import win kivy.core.window.Window
#:set win_height win.height
#:set win_width win.width

#:set img_h 350
#:set img_w 467
#:set cx1 417
#:set cx2 win_width/2
#:set cx3 win_width-cx1
#:set x1 242
#:set x2 785
#:set x3 win_width-x1
#:set y_text win_height - 589
#:set y_img win_height - 106
#:set img_x x1 - ((img_w - img_h)/2 )
#:set textwin_width 350
#:set textwin_height 292


<Root>:
    Preproc_Anim


<RoundImage>:
    texture: None
    size: root.target_w, root.target_h
    index:10

    canvas.before:
        StencilPush
        Ellipse:
            pos: self.pos[0] + (root.target_w - root.target_h)/2, self.pos[1]
            size: self.height, self.height
        StencilUse
        Rectangle:
            id: original
            texture: self.texture
            # pos: self.x,  self.y
            pos: self.x - ((root.target_w - root.target_h)/2),  self.y
            size: self.width, self.height
        StencilUnUse
        StencilPop

<Preproc_Anim>:
    # Button:
    #     id: btn
    #     size_hint: None, None
    #     center: win.width/2, win.height/4
    #     size: 100, 50
    #     on_state: print("pressed")
    #     # on_touch_down:
    #     #     print("pressed")
    #     on_press:
    #         modal.open()
    #         print("button pressed")
    #     text: "popup"
    RoundImage:
        id: blur
        center_x: cx3
        top: y_img
        size: root.target_w, root.target_h
        texture: root.create_texture('blur', make_grey=True)
    RoundImage:
        id: grey2alpha
        center_x: cx2
        top: y_img
        size: root.target_w, root.target_h
        texture: root.create_texture('grey', make_grey=True)
    RoundImage:
        id: grey
        center_x: cx2
        top: y_img
        size: root.target_w, root.target_h
        texture: root.create_texture('grey', make_grey=True)
    RoundImage:
        id: orig2alpha
        center_x: cx1
        top: y_img
        size: root.target_w, root.target_h
        texture: root.create_texture('orig', is_colored=True)
    RoundImage:
        id: original
        center_x: cx1
        top: y_img
        size: root.target_w, root.target_h
        texture: root.create_texture('orig', is_colored=True)


    Label:
        id: text_orig
        text: root.text_orig
        center_x: cx1
        # center_x: original.center_x -((root.target_w - root.target_h)/2)
        top: y_text
        text_size: textwin_width, textwin_height
        font_size: '18sp'
        valign: "top"
    Label:
        id: text_grey
        text: root.text_grey
        center_x: cx2
        # center_x: grey.center_x -((root.target_w - root.target_h)/2)
        top: y_text
        text_size: textwin_width, textwin_height
        font_size: '18sp'
        valign: "top"

    Label:
        id: text_blur
        text: root.text_blur
        center_x: cx3
        # center_x: blur.center_x -((root.target_w - root.target_h)/2)
        top: y_text
        text_size: textwin_width, textwin_height
        font_size: '18sp'
        valign: "top"
